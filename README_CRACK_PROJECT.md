# YOLO è£‚ç¼æ£€æµ‹é¡¹ç›® ğŸ”

æœ¬é¡¹ç›®åŸºäº Ultralytics YOLO æ¡†æ¶ï¼Œé›†æˆäº†ä¸“é—¨ç”¨äºè£‚ç¼æ£€æµ‹çš„è‡ªå®šä¹‰å›¾åƒå¢å¼ºç®—æ³•ã€‚

## ğŸ¯ é¡¹ç›®ç‰¹è‰²

### âœ… è‡ªå®šä¹‰å¢å¼ºç®—æ³•é›†æˆ
- **ä¸“é—¨é’ˆå¯¹è£‚ç¼æ£€æµ‹ä¼˜åŒ–**çš„å›¾åƒå¢å¼ºæŠ€æœ¯
- **å®Œå…¨é›†æˆåˆ° Ultralytics æ¡†æ¶**ä¸­ï¼Œæ— éœ€é¢å¤–é…ç½®æ–‡ä»¶
- **çµæ´»çš„å‘½ä»¤è¡Œæ§åˆ¶**ï¼Œæ”¯æŒå®æ—¶è°ƒæ•´å¢å¼ºå‚æ•°

### ğŸ”§ æ ¸å¿ƒåŠŸèƒ½
1. **å¯¹æ¯”åº¦å¢å¼º**: ä½¿ç”¨CLAHE (é™åˆ¶å¯¹æ¯”åº¦è‡ªé€‚åº”ç›´æ–¹å›¾å‡è¡¡åŒ–)
2. **è¾¹ç¼˜å¢å¼º**: åŸºäºCannyè¾¹ç¼˜æ£€æµ‹çš„ç‰¹å¾å¢å¼º
3. **å™ªå£°æ·»åŠ **: éšæœºé«˜æ–¯å™ªå£°å¢å¼ºæ•°æ®å¤šæ ·æ€§
4. **äº®åº¦è°ƒèŠ‚**: è‡ªé€‚åº”äº®åº¦è°ƒæ•´
5. **é«˜çº§ç›´æ–¹å›¾å‡è¡¡åŒ–**: ä½¿ç”¨åŒæ›²æ­£åˆ‡æ˜ å°„çš„ä¸“ä¸šç®—æ³•

## ğŸ“¦ é¡¹ç›®ç»“æ„

```
crackv2/
â”œâ”€â”€ ultralytics/                    # Ultralytics YOLOæ¡†æ¶ (å·²é›†æˆè‡ªå®šä¹‰å¢å¼º)
â”‚   â”œâ”€â”€ cfg/default.yaml           # æ¡†æ¶é…ç½®æ–‡ä»¶ (åŒ…å«è‡ªå®šä¹‰å¢å¼ºå‚æ•°)
â”‚   â”œâ”€â”€ data/augment.py            # æ•°æ®å¢å¼ºæ¨¡å— (åŒ…å«CustomAugmentç±»)
â”‚   â””â”€â”€ ...                        # å…¶ä»–æ¡†æ¶æ–‡ä»¶
â”œâ”€â”€ main.py                        # ä¸»è®­ç»ƒè„šæœ¬ (æ”¯æŒè‡ªå®šä¹‰å¢å¼ºæ§åˆ¶)
â””â”€â”€ README_CRACK_PROJECT.md       # é¡¹ç›®è¯´æ˜æ–‡æ¡£
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡
```bash
pip install ultralytics
pip install scipy  # ç”¨äºé«˜çº§å›¾åƒå¤„ç†ç®—æ³•
```

### 2. æ•°æ®é›†é…ç½®
åˆ›å»ºæ•°æ®é›†é…ç½®æ–‡ä»¶ `crack_dataset.yaml`:
```yaml
path: ../datasets/crack_dataset  # æ•°æ®é›†æ ¹ç›®å½•
train: images/train              # è®­ç»ƒå›¾åƒ
val: images/val                  # éªŒè¯å›¾åƒ
test: images/test               # æµ‹è¯•å›¾åƒ

nc: 1                           # ç±»åˆ«æ•°é‡
names: ['crack']                # ç±»åˆ«åç§°
```

### 3. è®­ç»ƒå‘½ä»¤

#### åŸºæœ¬è®­ç»ƒ
```bash
# ä½¿ç”¨é»˜è®¤è‡ªå®šä¹‰å¢å¼ºè®¾ç½®
python main.py --data crack_dataset.yaml --model yolo11n.yaml

# ä½¿ç”¨é¢„è®­ç»ƒæƒé‡
python main.py --data crack_dataset.yaml --model yolo11n.yaml --weights yolo11n.pt
```

#### è‡ªå®šä¹‰å¢å¼ºæ§åˆ¶
```bash
# ç¦ç”¨è‡ªå®šä¹‰å¢å¼º
python main.py --data crack_dataset.yaml --model yolo11n.yaml --disable-custom-augment

# é«˜å¼ºåº¦è‡ªå®šä¹‰å¢å¼º
python main.py --data crack_dataset.yaml --model yolo11n.yaml \
    --custom-augment 0.8 --custom-intensity 0.7 --custom-sigma 8

# è½»åº¦è‡ªå®šä¹‰å¢å¼º
python main.py --data crack_dataset.yaml --model yolo11n.yaml \
    --custom-augment 0.3 --custom-intensity 0.2 --custom-sigma 3

# åªä¿®æ”¹å¢å¼ºæ¦‚ç‡
python main.py --data crack_dataset.yaml --model yolo11n.yaml --custom-augment 0.6
```

## âš™ï¸ å‚æ•°è¯´æ˜

### å‘½ä»¤è¡Œå‚æ•°

#### å¿…éœ€å‚æ•°
- `--data`: æ•°æ®é›†é…ç½®æ–‡ä»¶è·¯å¾„
- `--model`: æ¨¡å‹æ¶æ„é…ç½®æ–‡ä»¶è·¯å¾„

#### å¯é€‰å‚æ•°
- `--hyp`: è®­ç»ƒè¶…å‚æ•°é…ç½®æ–‡ä»¶è·¯å¾„ï¼ˆé»˜è®¤: `ultralytics/cfg/default.yaml`ï¼‰
- `--weights`: é¢„è®­ç»ƒæƒé‡è·¯å¾„ï¼ˆé»˜è®¤: `yolo11n.pt`ï¼‰

#### è‡ªå®šä¹‰å¢å¼ºæ§åˆ¶å‚æ•°
- `--disable-custom-augment`: ç¦ç”¨è‡ªå®šä¹‰å¢å¼ºç®—æ³•
- `--custom-augment FLOAT`: å¢å¼ºæ¦‚ç‡ (0.0-1.0)
- `--custom-intensity FLOAT`: å¢å¼ºå¼ºåº¦ (0.0-1.0)  
- `--custom-sigma INT`: å¹³æ»‘ç³»æ•° (1-10)

### å‚æ•°è¯¦è§£

| å‚æ•° | èŒƒå›´ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `custom_augment` | 0.0-1.0 | 0.5 | è‡ªå®šä¹‰å¢å¼ºåº”ç”¨æ¦‚ç‡ï¼Œ0.0=å®Œå…¨ç¦ç”¨ï¼Œ1.0=æ€»æ˜¯åº”ç”¨ |
| `custom_intensity` | 0.0-1.0 | 0.4 | å¢å¼ºå¼ºåº¦ï¼Œæ§åˆ¶è¾¹ç¼˜å¢å¼ºç­‰æ•ˆæœçš„å¼ºçƒˆç¨‹åº¦ |
| `custom_sigma` | 1-10 | 5 | å¹³æ»‘ç³»æ•°ï¼Œç”¨äºé«˜çº§ç›´æ–¹å›¾å‡è¡¡åŒ–ç®—æ³• |

## ğŸ›ï¸ æ§åˆ¶æ–¹å¼

### 1. å‘½ä»¤è¡Œæ§åˆ¶ï¼ˆæ¨èï¼‰
ç›´æ¥é€šè¿‡ main.py çš„å‘½ä»¤è¡Œå‚æ•°æ§åˆ¶ï¼š
```bash
python main.py --data dataset.yaml --model yolo11n.yaml --custom-augment 0.8
```

### 2. é…ç½®æ–‡ä»¶æ§åˆ¶
ç¼–è¾‘ `ultralytics/cfg/default.yaml` æ–‡ä»¶ï¼š
```yaml
# è‡ªå®šä¹‰å¢å¼ºå‚æ•°
custom_augment: 0.5      # å¢å¼ºæ¦‚ç‡
custom_intensity: 0.4    # å¢å¼ºå¼ºåº¦
custom_sigma: 5          # å¹³æ»‘ç³»æ•°
```

### 3. ç¨‹åºåŒ–æ§åˆ¶
```python
from ultralytics import YOLO
import yaml

# åŠ è½½å¹¶ä¿®æ”¹é…ç½®
with open('ultralytics/cfg/default.yaml', 'r') as f:
    config = yaml.safe_load(f)

# ç¦ç”¨è‡ªå®šä¹‰å¢å¼º
config['custom_augment'] = 0.0

# æˆ–å¯ç”¨é«˜å¼ºåº¦å¢å¼º
config['custom_augment'] = 0.8
config['custom_intensity'] = 0.7
config['custom_sigma'] = 8

# è®­ç»ƒ
model = YOLO('yolo11n.yaml')
model.train(data='crack_dataset.yaml', **config)
```

## ğŸ”¬ æŠ€æœ¯äº®ç‚¹

### é«˜çº§ç›´æ–¹å›¾å‡è¡¡åŒ–ç®—æ³•
å®ç°äº†åŸºäºåŒæ›²æ­£åˆ‡æ˜ å°„çš„é«˜çº§ç›´æ–¹å›¾å‡è¡¡åŒ–ï¼š
- åŠ¨æ€Cannyé˜ˆå€¼è®¡ç®—
- è‡ªé€‚åº”å½¢æ€å­¦å¤„ç†
- ç›´æ–¹å›¾å³°å€¼åˆ†æ
- æ™ºèƒ½å¼ºåº¦è®¡ç®—
- è¾¹ç¼˜èåˆæŠ€æœ¯

### æ™ºèƒ½å¢å¼ºç­–ç•¥
- **éšæœºé€‰æ‹©å¢å¼ºæ–¹æ³•**é¿å…è¿‡æ‹Ÿåˆ
- **å¼‚å¸¸å¤„ç†æœºåˆ¶**ç¡®ä¿è®­ç»ƒç¨³å®šæ€§
- **ä¸YOLOæ ‡ç­¾ç³»ç»Ÿå®Œç¾å…¼å®¹**
- **ä¿æŒè¾¹ç•Œæ¡†å’Œåˆ†å‰²æ©ç çš„ä¸€è‡´æ€§**

### å·¥ç¨‹åŒ–å®ç°
- **æ¨¡å—åŒ–è®¾è®¡**ï¼Œæ˜“äºæ‰©å±•
- **å®Œæ•´çš„é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•**
- **é…ç½®åŒ–å‚æ•°ç®¡ç†**
- **å‘åå…¼å®¹æ€§ä¿è¯**

## ğŸ“Š ä½¿ç”¨ç¤ºä¾‹

### ä¸åŒåœºæ™¯çš„é…ç½®å»ºè®®

#### é«˜è´¨é‡æ•°æ®é›†
```bash
# è½»åº¦å¢å¼ºï¼Œä¿æŒæ•°æ®åŸå§‹ç‰¹å¾
python main.py --data dataset.yaml --model yolo11n.yaml --custom-augment 0.3 --custom-intensity 0.2
```

#### å°æ•°æ®é›†
```bash
# é«˜å¼ºåº¦å¢å¼ºï¼Œå¢åŠ æ•°æ®å¤šæ ·æ€§
python main.py --data dataset.yaml --model yolo11n.yaml --custom-augment 0.8 --custom-intensity 0.6
```

#### å¯¹æ¯”å®éªŒ
```bash
# ç¦ç”¨è‡ªå®šä¹‰å¢å¼ºä½œä¸ºåŸºå‡†
python main.py --data dataset.yaml --model yolo11n.yaml --disable-custom-augment

# å¯ç”¨è‡ªå®šä¹‰å¢å¼ºå¯¹æ¯”æ•ˆæœ
python main.py --data dataset.yaml --model yolo11n.yaml --custom-augment 0.5
```

## ğŸš€ ä¼˜åŠ¿ç‰¹æ€§

- âœ… **ä¸€é”®éƒ¨ç½²**: æ— éœ€å¤æ‚é…ç½®ï¼Œå¼€ç®±å³ç”¨
- âœ… **çµæ´»æ§åˆ¶**: å¤šç§æ–¹å¼æ§åˆ¶å¢å¼ºå‚æ•°
- âœ… **ä¸“ä¸šç®—æ³•**: é’ˆå¯¹è£‚ç¼æ£€æµ‹ä¼˜åŒ–çš„å¢å¼ºæŠ€æœ¯
- âœ… **å®Œæ•´é›†æˆ**: æ·±åº¦é›†æˆåˆ°Ultralyticsæ¡†æ¶ä¸­
- âœ… **å‚æ•°éªŒè¯**: è‡ªåŠ¨å‚æ•°éªŒè¯å’Œé”™è¯¯å¤„ç†
- âœ… **è¯¦ç»†æ—¥å¿—**: æ¸…æ™°çš„è®­ç»ƒè¿‡ç¨‹ä¿¡æ¯æ˜¾ç¤º

## ğŸ“ æ³¨æ„äº‹é¡¹

1. ç¡®ä¿å®‰è£…äº†æ‰€æœ‰ä¾èµ–åŒ…ï¼Œç‰¹åˆ«æ˜¯ `scipy`
2. æ•°æ®é›†è·¯å¾„éœ€è¦æ­£ç¡®é…ç½®
3. å»ºè®®ä½¿ç”¨GPUè¿›è¡Œè®­ç»ƒä»¥è·å¾—æ›´å¥½çš„æ€§èƒ½
4. å¯ä»¥æ ¹æ®å…·ä½“æ•°æ®é›†è°ƒæ•´å¢å¼ºå‚æ•°
5. å‘½ä»¤è¡Œå‚æ•°ä¼˜å…ˆçº§é«˜äºé…ç½®æ–‡ä»¶è®¾ç½®

## ğŸ”— ç›¸å…³é“¾æ¥

- [Ultralytics å®˜æ–¹æ–‡æ¡£](https://docs.ultralytics.com/)
- [YOLO æ¨¡å‹ä»‹ç»](https://www.ultralytics.com/yolo)
- [é¡¹ç›® GitHub ä»“åº“](https://github.com/xh92117/cracks-custom_augment)

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäº AGPL-3.0 è®¸å¯è¯ã€‚è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

---

**å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿æäº¤ Issue æˆ– Pull Requestï¼** ğŸ‰ 